{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["// Описаний в документації\nimport flatpickr from 'flatpickr';\n// Додатковий імпорт стилів\nimport 'flatpickr/dist/flatpickr.min.css';\n\n// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet userSelectedDate = null; // Оголошуємо змінну для збереження обраної дати\nlet timerInterval = null; // Зберігає ідентифікатор інтервалу для таймера\n\nconst refs = {\n  input: document.querySelector('#datetime-picker'),\n  startBtn: document.querySelector('body > button'),\n  timerDisplay: document.querySelector('.timer'),\n};\n\nrefs.startBtn.addEventListener('click', startTimer);\n\nrefs.startBtn.disabled = false; // Кнопка активна\n\nflatpickr(refs.input, {\n  enableTime: true,\n  time_24hr: true,\n\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    userSelectedDate = selectedDates[0]; // Зберігаємо обрану дату у змінну\n\n    const now = new Date(); // Поточна дата\n    if (userSelectedDate < now) {\n      // Перевіряємо, чи обрана дата в минулому\n      iziToast.show({\n        message: 'Please choose a date in the future',\n      }); // Показуємо повідомлення\n      refs.startBtn.disabled = true; // Робимо кнопку неактивною\n    } else {\n      refs.startBtn.disabled = false; // Якщо дата в майбутньому, кнопка активна\n    }\n  },\n});\n\nfunction startTimer() {\n  if (!userSelectedDate) return; // Якщо користувач не обрав дату, не починати таймер\n\n  const now = new Date().getTime(); // Отримуємо поточну дату та час\n\n  const targetDate = userSelectedDate.getTime(); // Отримуємо вказану користувачем дату та час\n\n  let remainingTime = targetDate - now;\n\n  if (timerInterval) clearInterval(timerInterval); // Якщо таймер вже запущено, зупиняємо його\n\n  timerInterval = setInterval(() => {\n    // Оновлюємо інтерфейс таймера кожну секунду\n    refs.input.disabled = true;\n    refs.startBtn.disabled = true;\n    remainingTime -= 1000;\n\n    if (remainingTime <= 0) {\n      // Перевіряємо, чи таймер дійшов до кінцевої дати\n      clearInterval(timerInterval); // Зупиняємо таймер\n      refs.timerDisplay.textContent = '00:00:00:00';\n      refs.input.disabled = false;\n      refs.startBtn.disabled = false;\n      return;\n    }\n\n    const { days, hours, minutes, seconds } = convertMs(remainingTime);\n\n    // Форматуємо та відображаємо час у форматі xx:xx:xx:xx\n    refs.timerDisplay.textContent = `${formatTime(days)}:${formatTime(\n      hours\n    )}:${formatTime(minutes)}:${formatTime(seconds)}`;\n  }, 1000);\n}\nfunction formatTime(time) {\n  return time < 10 ? `0${time}` : time;\n}\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nconsole.log(convertMs(2000)); // {days: 0, hours: 0, minutes: 0, seconds: 2}\nconsole.log(convertMs(140000)); // {days: 0, hours: 0, minutes: 2, seconds: 20}\nconsole.log(convertMs(24140000)); // {days: 0, hours: 6 minutes: 42, seconds: 20}\n"],"names":["userSelectedDate","timerInterval","refs","startTimer","flatpickr","selectedDates","iziToast","now","remainingTime","days","hours","minutes","seconds","convertMs","formatTime","time","ms"],"mappings":"2GAUA,IAAIA,EAAmB,KACnBC,EAAgB,KAEpB,MAAMC,EAAO,CACX,MAAO,SAAS,cAAc,kBAAkB,EAChD,SAAU,SAAS,cAAc,eAAe,EAChD,aAAc,SAAS,cAAc,QAAQ,CAC/C,EAEAA,EAAK,SAAS,iBAAiB,QAASC,CAAU,EAElDD,EAAK,SAAS,SAAW,GAEzBE,EAAUF,EAAK,MAAO,CACpB,WAAY,GACZ,UAAW,GAEX,gBAAiB,EACjB,QAAQG,EAAe,CACrBL,EAAmBK,EAAc,CAAC,EAG9BL,EADQ,IAAI,MAGdM,EAAS,KAAK,CACZ,QAAS,oCACjB,CAAO,EACDJ,EAAK,SAAS,SAAW,IAEzBA,EAAK,SAAS,SAAW,EAE5B,CACH,CAAC,EAED,SAASC,GAAa,CACpB,GAAI,CAACH,EAAkB,OAEvB,MAAMO,EAAM,IAAI,KAAM,EAAC,QAAO,EAI9B,IAAIC,EAFeR,EAAiB,UAEHO,EAE7BN,GAAe,cAAcA,CAAa,EAE9CA,EAAgB,YAAY,IAAM,CAMhC,GAJAC,EAAK,MAAM,SAAW,GACtBA,EAAK,SAAS,SAAW,GACzBM,GAAiB,IAEbA,GAAiB,EAAG,CAEtB,cAAcP,CAAa,EAC3BC,EAAK,aAAa,YAAc,cAChCA,EAAK,MAAM,SAAW,GACtBA,EAAK,SAAS,SAAW,GACzB,MACD,CAED,KAAM,CAAE,KAAAO,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUL,CAAa,EAGjEN,EAAK,aAAa,YAAc,GAAGY,EAAWL,CAAI,CAAC,IAAIK,EACrDJ,CACN,CAAK,IAAII,EAAWH,CAAO,CAAC,IAAIG,EAAWF,CAAO,CAAC,EAChD,EAAE,GAAI,CACT,CACA,SAASE,EAAWC,EAAM,CACxB,OAAOA,EAAO,GAAK,IAAIA,CAAI,GAAKA,CAClC,CACA,SAASF,EAAUG,EAAI,CAQrB,MAAMP,EAAO,KAAK,MAAMO,EAAK,KAAG,EAE1BN,EAAQ,KAAK,MAAOM,EAAK,MAAO,IAAI,EAEpCL,EAAU,KAAK,MAAQK,EAAK,MAAO,KAAQ,GAAM,EAEjDJ,EAAU,KAAK,MAASI,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAP,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,QAAQ,IAAIC,EAAU,GAAI,CAAC,EAC3B,QAAQ,IAAIA,EAAU,IAAM,CAAC,EAC7B,QAAQ,IAAIA,EAAU,MAAQ,CAAC"}